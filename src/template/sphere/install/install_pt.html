<!DOCTYPE html>
<html lang="pt" dir="ltr" data-nav-layout="vertical" data-theme-mode="light" data-header-styles="light"
      data-menu-styles="light" data-toggled="close">
<head>
  <meta charset="UTF-8">
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Instalação do Sphere Web CMS </title>
  <meta name="Description" content="Template de Painel de Controle Administrativo Responsivo Bootstrap em HTML5">
  <meta name="Author" content="Spruko Technologies Private Limited">
  <meta name="keywords" content="Lineage 2, L2, Lineage II, servidor Lineage 2, MMORPG, PvP, PvE, quests de Lineage 2, crônicas de Lineage 2, servidor L2j, servidor L2, L2j, L2off, servidor personalizado de Lineage 2, servidor gratuito de Lineage 2, instalação de Lineage 2, cliente Lineage 2, baixar Lineage 2, atualizações de Lineage 2, Lineage 2 Interlude, Lineage 2 Gracia, Lineage 2 High Five, crônicas de Lineage 2 Interlude, crônicas de Lineage 2 Gracia, crônicas de Lineage 2 High Five, clãs de Lineage 2, cercos de castelos de Lineage 2, pets de Lineage 2, pesca de Lineage 2, profissões de Lineage 2, classes de Lineage 2, Lineage 2 Aden, arenas de Lineage 2, RB de Lineage 2, chefes de raid, servidores L2, servidores Interlude, servidores Gracia, servidores High Five, crônicas de Lineage 2 Epilogue, servidores PvP, servidores com rates, rates altos de Lineage 2, rates baixos de Lineage 2, rates médios de Lineage 2, craft de Lineage 2, clan halls de Lineage 2, chefes épicos de Lineage 2, armaduras de Lineage 2, armas de Lineage 2, sistema de craft de Lineage 2, economia de Lineage 2, jogadores de Lineage 2, fórum de Lineage 2, melhores servidores de Lineage 2, baixar Lineage 2 gratuitamente, admin de Lineage 2, quests, rates, grind, batalhas PvP em massa, pergaminhos de teletransporte, magia de Lineage 2, healers de Lineage 2, tanks de Lineage 2, dano de Lineage 2, ataque em Lineage 2, equipamento de Lineage 2, armaduras de Lineage 2, instâncias, instanced dungeons, clãs, alianças, notícias de Lineage 2, torneios de Lineage 2, servidores de Lineage 2 com mods personalizados, magos de Lineage 2, curadores, classes de suporte de Lineage 2, bufadores, debufadores, buffs, crônicas de Lineage 2 Classic, Lineage 2 Essence, atualizações de Lineage 2, sistemas exclusivos de Lineage 2, comandos GM, eventos GM, arenas de Lineage 2, guerras de clãs, arena de Lineage 2, torneios, arenas PvP de Lineage 2, L2JMobius, scripts de Lineage 2, crafting, NPC de Lineage 2, quests de Lineage 2, raças de Lineage 2, humanos, elfos, elfos negros, orcs, anões, kamael, facções de Lineage 2, castelos de Lineage 2, cercos de castelo, servidor Lineage 2 sem doação, servidores de doação de Lineage 2, top servidores de Lineage 2, programas de bot para Lineage 2, sistemas de doação, economia de servidor, GMs, eventos, cercos, batalhas, crônicas de L2, top de servidores de Lineage 2, mods, servidores de Lineage 2 com mods, servidor sem wipe, rate de servidor, jogabilidade de Lineage 2, cheats de Lineage 2, servidores PvP, crônicas High Five, crônicas Gracia, epílogo, crônicas Freya, crônicas Awakening, rates x100, rates x10, leveling de Lineage 2, autobuff, caça a monstros de Lineage 2, catálogos de servidores de Lineage 2, mapa mundial de Lineage 2, habilidades de Lineage 2, crônicas Essence, clan hall, sistema de fortalecimento, sistema de buffs, L2, jogabilidade de Lineage 2, servidores de Lineage 2 2024, Lineage 2 para iniciantes, dicas de jogo, ranking de servidores de Lineage 2, guias iniciais, personagens, dicas de Lineage 2, mapas de monstros de Lineage 2, guias de raid bosses, busca de raid bosses, tarefas internas do jogo, recursos de Lineage 2, sistema de classes, eventos de Lineage 2, leveling de personagem, chefes, inventário, pesca, guia de profissões, top servidores L2, Lineage 2 noblesse, olimpíada, olimpíada de Lineage 2, eventos de Lineage 2, eventos PvP, pets, evolução de pets, guildas de Lineage 2, alianças, política em Lineage 2, cercos de Lineage 2, estratégia, guerra por território, conteúdo de Lineage 2, economia do jogo, aprendizado de Lineage 2, itens raros, sets, armaduras, armas, PvP, PvE, RPG de Lineage 2, mundo L2, Линейка" />
  <link rel="icon" href="{{template}}/assets/images/brand-logos/favicon.ico" type="image/x-icon">
  <script src="{{template}}/assets/js/authentication-main.js"></script>
  <link id="style" href="{{template}}/assets/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="{{template}}/assets/css/styles.min.css" rel="stylesheet">
  <link href="{{template}}/assets/libs/simplebar/simplebar.min.css" rel="stylesheet">
  <link href="{{template}}/assets/css/icons.min.css" rel="stylesheet">
</head>

<body>
<div id="loader">
  <img src="{{template}}/assets/images/media/loader.svg" alt="">
</div>

<div class="toast-container position-fixed top-0 end-0 p-3">
  <div id="successToast" class="toast colored-toast bg-success-transparent" role="alert" aria-live="assertive"
       aria-atomic="true">
    <div class="toast-header bg-success text-fixed-white">
      <img class="bd-placeholder-img rounded me-2" src="{{template}}/assets/images/brand-logos/toggle-white.png"
           alt="...">
      <strong class="me-auto" id="successTitleMessageNotice"></strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast"
              aria-label="Close"></button>
    </div>
    <div class="toast-body" id="successContentMessageNotice"></div>
  </div>

  <div id="dangerToast" class="toast colored-toast bg-danger-transparent" role="alert" aria-live="assertive"
       aria-atomic="true">
    <div class="toast-header bg-danger text-fixed-white">
      <img class="bd-placeholder-img rounded me-2" src="{{template}}/assets/images/brand-logos/toggle-white.png"
           alt="...">
      <strong class="me-auto" id="dangerTitleMessageNotice"></strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast"
              aria-label="Close"></button>
    </div>
    <div class="toast-body" id="dangerContentMessageNotice"></div>
  </div>
</div>

<div class="bg-dark-gradient ">

  <div class="container-lg">
    <div class="row justify-content-center authentication authentication-basic align-items-center h-100">
      <div class="row">
        <div class="col-xl-12">
          <div class="card custom-card">
            <div class="card-body p-0 product-checkout">
              <ul
                class="nav nav-tabs tab-style-2 d-sm-flex d-block border-bottom border-block-end-dashed justify-content-between"
                id="myTab1" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="order-tab" data-bs-toggle="tab"
                          data-bs-target="#order-tab-pane" type="button" role="tab"
                          aria-controls="order-tab" aria-selected="true"><i
                    class="ri-truck-line me-2 align-middle"></i>Acordo de Licença
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button disabled class="nav-link" id="minimum-requirements" data-bs-toggle="tab"
                          data-bs-target="#minimum-requirements-tab-pane" type="button" role="tab"
                          aria-controls="minimum-requirements" aria-selected="false"><i
                    class="ri-bank-card-line me-2 align-middle"></i>Requisitos Mínimos
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button disabled class="nav-link" id="mysql-tab" data-bs-toggle="tab"
                          data-bs-target="#mysql-tab-pane" type="button" role="tab"
                          aria-controls="mysql-tab" aria-selected="false"><i
                    class="ri-user-3-line me-2 align-middle"></i>Conexão ao BD
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button disabled class="nav-link" id="admin-tab" data-bs-toggle="tab"
                          data-bs-target="#admin-tab-pane" type="button" role="tab"
                          aria-controls="admin-tab" aria-selected="false"><i
                    class="ri-user-3-line me-2 align-middle"></i>Administrador
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button disabled class="nav-link" id="install-tab" data-bs-toggle="tab"
                          data-bs-target="#install-tab-pane" type="button" role="tab"
                          aria-controls="install-tab" aria-selected="false"><i
                    class="ri-checkbox-circle-line me-2 align-middle"></i>Confirmação
                  </button>
                </li>
              </ul>
              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active border-0 p-0" id="order-tab-pane" role="tabpanel"
                     aria-labelledby="order-tab-pane" tabindex="0">


                  <div class="row justify-content-center">
                    <div class="col-xl-12">
                      <div class="card custom-card overflow-hidden">
                        <div class="card-body p-0 ">
                          <div class="p-4 text-muted terms-conditions" id="terms-scroll">
                            <h6 class="fw-bold pb-3 text-default ">Acordo de Licença</h6>

                            <p class="mb-3 ">
                              <span class="fw-bold text-default">1. Licença de Uso do Software</span><br>
                              1.1. O Licenciante concede a você uma licença não exclusiva e intransferível para usar o
                              Software de acordo com os termos deste Acordo.<br>
                              1.2. Sob esta licença, você tem o direito de usar o Software apenas para fins não
                              comerciais.<br>
                              1.3. Você não tem o direito de vender, alugar, licenciar, modificar, adaptar,
                              distribuir, traduzir, descompilar, fazer engenharia reversa ou criar obras derivadas
                              baseadas no Software sem a permissão expressa por escrito do Licenciante.<br>
                            </p>

                            <p class="mb-3">
                              <span class="fw-bold text-default">2. Garantia Limitada</span><br>
                              2.1. O Software é fornecido "no estado em que se encontra", sem quaisquer garantias
                              explícitas ou implícitas, incluindo, mas não se limitando a garantias implícitas de
                              comercialização, adequação a uma finalidade específica ou não violação de direitos.<br>
                            </p>

                            <p class="mb-3">
                              <span class="fw-bold text-default">3. Limitação de Responsabilidade</span><br>
                              3.1. Em caso de quaisquer reclamações, perdas ou outras responsabilidades decorrentes do
                              uso do Software, o Licenciante não será responsável perante você ou terceiros.<br>
                            </p>

                            <p class="mb-3">
                              <span class="fw-bold text-default">4. Proibição de venda ou modificação</span><br>
                              4.1. Você não tem o direito de vender, alugar, licenciar, modificar, adaptar,
                              distribuir, traduzir, descompilar, fazer engenharia reversa ou criar obras derivadas
                              baseadas no Software sem a permissão expressa por escrito do Licenciante.<br>
                            </p>

                            <p class="mb-3">
                              <span class="fw-bold text-default">5. Estudo do código-fonte</span><br>
                              5.1. Você tem o direito de estudar o código-fonte do Software para fins de
                              conhecimento e aprendizado pessoal.<br>
                            </p>

                            <p class="mb-3">
                              <span class="fw-bold text-default">6. Solicitação de modificações</span><br>
                              6.1. Caso sejam necessárias modificações ou ajustes no Software, você se compromete a
                              entrar em contato com o Licenciante para obter permissão e alinhamento.<br>
                            </p>

                            <p class="mb-3">
                              <span class="fw-bold text-default">7. Resolução de disputas</span><br>
                              7.1. Em caso de disputas relacionadas a este Acordo, as partes se comprometem a tentar
                              resolvê-las por meio de negociações.<br>
                              7.2. Se as disputas não puderem ser resolvidas por meio de negociações, elas serão
                              resolvidas de acordo com a legislação aplicável.<br>
                            </p>

                            <p class="mb-3">
                              <span class="fw-bold text-default">8. Outras disposições</span><br>
                              8.1. Este Acordo constitui o entendimento completo entre você e o Licenciante em relação
                              ao Software, substituindo todos os acordos e promessas anteriores ou simultâneos,
                              explícitos ou implícitos, referentes ao assunto em questão.<br>
                              8.2. Este Acordo é regido e deve ser interpretado de acordo com a legislação aplicável.<br>
                              8.3. Este Acordo entra em vigor no momento em que você começa a usar o Software e
                              permanece em vigor até ser encerrado.<br>
                            </p>

                            <footer class="mt-5">
                              <p>Assinado e concordado: Sphere Project Developer</p>
                              <p>Data: 04 de maio de 2024.</p>
                            </footer>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>


                  <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-between">
                    <div>
                      <a href="/en" class="text-success ms-2">English</a>
                      <a href="/ru" class="text-success ms-2">Russian</a>
                      <a href="/es" class="text-success ms-2">Spanish</a>
                      <a href="/pt" class="text-success ms-2">Portuguese</a>
                    </div>
                    <div>
                      <button type="button" class="btn btn-success-light" id="termsApply">Aceito os termos</button>
                    </div>
                  </div>



                </div>


                <div class="tab-pane fade border-0 p-0" id="minimum-requirements-tab-pane" role="tabpanel"
                     aria-labelledby="minimum-requirements-tab-pane" tabindex="0">
                  <div class="p-4">

                    <div class="row">
                      <div class="col-xl-12">
                        <div class="card custom-card">

                          <div class="table-responsive table-sm">
                            <table class="table text-nowrap">
                              <thead>
                              <tr>
                                <th scope="col">Nome</th>
                                <th scope="col">Mínimo</th>
                                <th scope="col">Atual</th>
                                <th scope="col">Status</th>
                              </tr>
                              </thead>
                              <tbody>

                              {% for info in php_informations %}
                              <tr>
                                <th scope="row">{{info.name}}</th>
                                <th>{{info.min}}</th>
                                <th>{{info.get}}</th>
                                <th>{{info.allow ? '<i class="fe fe-check text-success"></i>' : '<i aria-hidden="true"
                                                                                                    class="fe fe-alert-circle text-danger"></i>'}}
                                </th>
                              </tr>
                              {% endfor %}

                              {% for ext in extensions %}
                              <tr>
                                <th scope="row">Módulo PHP: {{ext.name}}</th>
                                <td></td>
                                <td></td>
                                <th>{{ext.allow ? '<i class="fe fe-check text-success"></i>' : '<i aria-hidden="true"
                                                                                                    class="fe fe-alert-circle text-danger"></i>'}}
                                </th>
                              </tr>
                              {% endfor %}

                              {% for dir in dir_permissions %}
                              <tr>
                                <th scope="row">{{ dir.path }}</th>
                                <td></td>
                                <td></td>
                                <td>{{ dir.per ? '<i aria-hidden="true" class="fe fe-check text-success"></i>' : '<i
                                  aria-hidden="true" class="fe fe-alert-circle text-danger"></i>' }}
                                </td>
                              </tr>
                              {% endfor %}

                              <tr>
                                <th scope="row">Não é localhost</th>
                                <td>SphereWeb não funcionará em localhost</td>
                                <td></td>
                                <td>{{ isLocalhost == false ? '<i aria-hidden="true" class="fe fe-check text-success"></i>' : '<i
                                  aria-hidden="true" class="fe fe-alert-circle text-danger"></i>' }}
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Arquivo: <a target="_blank"
                                                         href="https://github.com/Cannabytes/SphereWeb/blob/master/.htaccess">.htaccess</a>
                                </th>
                                <td></td>
                                <td></td>
                                <th>{{htaccess ? '<i aria-hidden="true" class="fe fe-check text-success"></i>' : '<i
                                  aria-hidden="true" class="fe fe-alert-circle text-danger"></i>' }}
                                </th>
                              </tr>

                              <tr>
                                <th scope="row">Apache</th>
                                <td>2.4</td>
                                <td></td>
                                <td></td>
                              </tr>
                              <tr>
                                <th scope="row">MySQL (MariaDB)</th>
                                <td>5.8</td>
                                <td></td>
                                <td></td>
                              </tr>
                              <tr>
                                <th scope="row">Memória RAM</th>
                                <td>1 GB</td>
                                <td></td>
                                <td></td>
                              </tr>
                              <tr>
                                <th scope="row">Espaço livre em disco</th>
                                <td>3 GB</td>
                                <td></td>
                                <td></td>
                              </tr>

                              </tbody>
                            </table>
                          </div>

                        </div>
                      </div>

                    </div>

                  </div>
                  <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-end">
                    <button type="button" class="btn btn-success-light" id="nextToConnectDB">Próximo</button>
                  </div>

                </div>

                <div class="tab-pane fade border-0 p-0" id="mysql-tab-pane"
                     role="tabpanel" aria-labelledby="mysql-tab-pane" tabindex="0">
                  <div class="p-4">
                    <div class="fs-15 fw-semibold d-sm-flex d-block align-items-center justify-content-between mb-3">
                      <div>Conexão ao BD MySQL / MariaDB</div>
                    </div>
                    <div class="row gy-4">

                      <div class="col-xl-2">
                        <label for="host" class="form-label">Host</label>
                        <input type="text" class="form-control" id="host" placeholder="127.0.0.1" value="127.0.0.1">
                      </div>

                      <div class="col-xl-2">
                        <label for="port" class="form-label">Port</label>
                        <input type="text" class="form-control" id="port" placeholder="3306" value="3306">
                      </div>

                      <div class="col-xl-2">
                        <label for="user" class="form-label">User</label>
                        <input type="text" class="form-control" id="user" placeholder="root" value="root">
                      </div>

                      <div class="col-xl-2">
                        <label for="password" class="form-label">Password</label>
                        <input type="text" class="form-control" id="password" placeholder="" value="">
                      </div>

                      <div class="col-xl-2">
                        <label for="name" class="form-label">Name</label>
                        <input type="text" class="form-control" id="name" placeholder="sphere" value="sphere">
                      </div>

                      <div class="col-xl-2">
                        <label for="mysqlConnect" class="form-label">Teste de Conexão</label>
                        <button type="button" class="btn btn-primary" id="mysqlConnect" value="">Connect</button>
                      </div>

                    </div>
                  </div>


                  <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-end">
                    <button type="button" class="btn btn-success-light m-1" id="nextToCreateAdmin">Próximo</button>
                  </div>
                </div>

                <div class="tab-pane fade border-0 p-0" id="admin-tab-pane"
                     role="tabpanel" aria-labelledby="mysql-tab-pane" tabindex="0">
                  <div class="p-4">
                    <div class="fs-15 fw-semibold d-sm-flex d-block align-items-center justify-content-between mb-3">
                      <div>Criar conta de Administrador</div>
                    </div>
                    <div class="row gy-4">

                      <div class="col-xl-2">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" placeholder="" value="">
                      </div>

                      <div class="col-xl-2">
                        <label for="nickname" class="form-label">Nome</label>
                        <input type="text" class="form-control" id="nickname" placeholder="" value="Admin">
                      </div>

                      <div class="col-xl-2">
                        <label for="adminPassword" class="form-label">Senha</label>
                        <input type="password" class="form-control" id="adminPassword" placeholder="" value="">
                      </div>

                    </div>
                  </div>


                  <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-end">
                    <button type="button" class="btn btn-success-light" id="nextToInstall">Próximo</button>
                  </div>
                </div>

                <div class="tab-pane fade border-0 p-0" id="install-tab-pane" role="tabpanel"
                     aria-labelledby="install-tab-pane" tabindex="0">
                  <div class="p-5 checkout-payment-success my-3">
                    <div class="mb-5">
                      <h5 class="text-success fw-semibold">Agora você pode iniciar a instalação do SphereWeb &#129309;</h5>
                    </div>

                    <div class="mb-4">
                    </div>

                    <button type="button" id="install" class="btn btn-success">Iniciar instalação</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script src="{{template}}/assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="{{template}}/assets/libs/simplebar/simplebar.min.js"></script>
<script src="{{template}}/assets/js/terms_conditions.js"></script>
<script src="{{template}}/assets/js/Toasts.js"></script>
<script src="{{template}}/assets/js/general.js"></script>

<script>
  $('#termsApply').click(function () {
    $('#minimum-requirements').tab('show');
    $('#minimum-requirements').removeAttr('disabled');
  });

  $('#nextToConnectDB').click(function () {
    $('#mysql-tab').tab('show');
    $('#mysql-tab').removeAttr('disabled');
  });

  $('#nextToCreateAdmin').click(function () {
    checkConnectDB().then(function(response) {
      if(MySQLVersionOK) {
        $('#admin-tab').tab('show');
        $('#admin-tab').removeAttr('disabled');
      } else {
        noticeError("É necessário estabelecer conexão com MySQL");
      }
    });
  });

  $('#nextToInstall').click(function () {

    let email = $('#email').val();
    let nickname = $('#nickname').val();
    let password = $('#adminPassword').val();

    if (!email || !nickname || !password) {
      noticeError("Preencha todos os campos obrigatórios");
      return;
    }
    // Verifica formato de email
    if (!isEmail(email)) {
      noticeError("Email inválido");
      return;
    }

    // Verifica tamanho da senha
    if (password.length < 6) {
      noticeError("A senha deve ter pelo menos 6 caracteres");
      return;
    }

    // Verifica tamanho do apelido
    if (nickname.length < 3) {
      noticeError("O nome deve ter pelo menos 3 caracteres");
      return;
    }

    $('#install-tab').tab('show');
    $('#install-tab').removeAttr('disabled');
  });


  function isEmail(email) {
    let regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    return regex.test(email);
  }

  var MySQLVersion = 0;
  var MySQLVersionOK = false;

  $('#mysqlConnect').click(function () {
    $(this).addClass('loading');
    checkConnectDB(function () {
      $('#mysqlConnect').removeClass('loading');
      if (MySQLVersionOK) {
        $('#admin-tab').tab('show');
        $('#admin-tab').removeAttr('disabled');
      }
    });
  });

  function checkConnectDB() {
    return new Promise(function(resolve, reject) {
      $.ajax({
        type: 'POST',
        url: '/install/db/connect/test',
        data: {
          host: $('#host').val(),
          name: $('#name').val(),
          user: $('#user').val(),
          password: $('#password').val(),
          port: $('#port').val(),
        },
        dataType: 'json',
        encode: true,
      }).done(function (data) {
        console.log(data)
        var needMinMySQLVer = parseFloat('{{need_mysql_version}}');
        if (data.ok) {
          MySQLVersion = parseFloat(data.mysqlVersion);
          if(MySQLVersion >= needMinMySQLVer) {
            resolve("Conexão com MySQL estabelecida com sucesso");
          } else {
            reject("A versão do MySQL deve ser pelo menos " + needMinMySQLVer);
          }
        }else{
          reject("Falha na conexão com MySQL");
        }
      });
    }).then(function(message) {
      console.log(message);
      noticeSuccess(message);
      MySQLVersionOK = true;
    }).catch(function(message) {
      console.log(message);
      noticeError(message);
    });
  }


  $("#install").click(function () {
    $(this).prop("disabled", true);
     AjaxSend("/install", "POST", {
       email: $('#email').val(),
       nickname: $('#nickname').val(),
       adminPassword: $('#adminPassword').val(),

       host: $('#host').val(),
       name: $('#name').val(),
       user: $('#user').val(),
       password: $('#password').val(),
       port: $('#port').val(),
     }, false, 10).then(function (data) {
       console.log(data)
       ResponseNotice(data);
     })
  });
</script>

</body>
</html>
